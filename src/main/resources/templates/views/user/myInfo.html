<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Page Title</title>
    <!-- Header 프래그먼트 포함 -->
    <th:block th:replace="common/fragments/index :: header-fragment"></th:block>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</head>
<!-- 페이지 래퍼 -->
<body style>

<!-- 페이지 래퍼 -->
<div id="wrapper">
    <!-- 사이드바 -->
    <th:block th:replace="common/fragments/index :: sidebar-fragment"></th:block>

    <!-- 콘텐츠 래퍼 -->
    <div id="content-wrapper" class="d-flex flex-column">
        <!-- 메인 콘텐츠 -->
        <div id="content">
            <!-- 탑바 -->
            <th:block th:replace="common/fragments/index :: topbar-fragment"></th:block>

            <!-- 페이지 콘텐츠 시작 -->
            <div class="container-fluid">
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary">회원 정보</h6>
                            </div>
                            <div class="card-body">
                                <div class="row justify-content-center">
                                    <div class="col-lg-12">
                                        <div class="p-5">
                                            <form class="user">
                                                <div class="form-group row">
                                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                                        <label for="uname">이름</label>
                                                        <input type="text" class="form-control" id="uname" value="uname">
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <label for="birth">생년월일</label>
                                                        <input type="text" class="form-control" id="birth">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                                        <label for="uid">아이디</label>
                                                        <input type="text" class="form-control " id="uid">
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <label for="upw">비밀번호</label>
                                                        <input type="text" class="form-control " id="upw">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                                        <label for="email">이메일</label>
                                                        <div class="container">
                                                            <div class="row">
                                                                <div class="col-9">
                                                                    <input type="text" class="form-control " id="email">
                                                                </div>
                                                                <div class="col-3">
                                                                    <a class="btn btn-primary btn-user btn-block" href="#" data-toggle="modal" data-target="#emailModal">
                                                                        변경
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <label for="tel">전화번호</label>
                                                        <div class="container">
                                                            <div class="row">
                                                                <div class="col-9">
                                                                    <input type="text" class="form-control " id="tel">
                                                                </div>
                                                                <div class="col-3">
                                                                    <a class="btn btn-primary btn-user btn-block" href="#" data-toggle="modal" data-target="#telModal">
                                                                        변경
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                </div>

                                                <div class="form-group row">
                                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                                        <a href="login.html" class="btn btn-primary btn-user btn-block">
                                                            돌아가기
                                                        </a>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <a class="btn btn-primary btn-user btn-block" href="#" data-toggle="modal" data-target="#withDrawModal">
                                                            탈퇴하기
                                                        </a>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.container-fluid -->

                </div>
                <!-- End of Main Content -->
        <script>
            $(document).ready(function() {
                console.log("test");
                loadUserData();
            });

            function loadUserData() {
                // Ajax를 사용하여 사용자 정보를 가져오는 요청을 보냅니다.

                $.ajax({
                    type: "GET", // GET 메서드를 사용하여 데이터를 요청합니다.
                    url: "/views/user/getUserData", // 사용자 정보를 가져오는 엔드포인트 URL입니다.
                    success: function(response) {
                        console.log(response);
                        // 요청이 성공하면 사용자 정보를 받아옵니다.
                        // 받아온 정보를 각 입력 필드에 채워넣습니다.
                        $('#uname').val(response.uname);
                        $('#birth').val(response.birth);
                        $('#uid').val(response.uid);
                        $('#upw').val(response.upw);
                        $('#email').val(response.email);
                        $('#tel').val(response.tel);
                    },
                    error: function(xhr, status, error) {
                        // 요청이 실패할 경우 에러 처리를 합니다.
                        console.error("Error loading user data:", error);
                        // 사용자에게 오류 메시지를 표시할 수 있습니다.
                        // 예를 들어, 사용자에게 데이터 로드에 실패했다는 경고를 표시할 수 있습니다.
                        alert("Failed to load user data. Please try again later.");
                    }
                });
            }
        </script>
        <!-- 본인 확인 Modal-->
        <div class="modal fade" id="identityVerificationModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"></h5>본인 확인</h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div>
                                <label for="name">비밀번호</label>
                                <input type="text" class="form-control" id="name">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" type="button" data-dismiss="modal">취소</button>
                        <a class="btn btn-primary" href="login.html">확인</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 이메일 변경 Modal-->
        <div class="modal fade" id="emailModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"></h5>이메일 변경</h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div>
                                <label for="name">현재 이메일</label>
                                <input type="text" class="form-control" id="name">
                            </div>
                            <div>
                                <label for="password">변경할 이메일</label>
                                <input type="text" class="form-control " id="password">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" type="button" data-dismiss="modal">취소</button>
                        <a class="btn btn-primary" href="login.html">변경</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 비밀번호 변경 Modal-->
        <div class="modal fade" id="pwModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"></h5>비밀번호 변경</h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div>
                                <label for="name">현재 비밀번호</label>
                                <input type="text" class="form-control" id="name">
                            </div>
                            <div>
                                <label for="password">변경할 비밀번호</label>
                                <input type="text" class="form-control " id="password">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" type="button" data-dismiss="modal">취소</button>
                        <a class="btn btn-primary" href="login.html">변경</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 전화번호 변경 Modal-->
        <div class="modal fade" id="telModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"></h5>전화번호 변경</h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div>
                                <label for="name">현재 전화번호</label>
                                <input type="text" class="form-control" id="tel">
                            </div>
                            <div>
                                <label for="password">변경할 전화번호</label>
                                <input type="text" class="form-control " id="tel2">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" type="button" data-dismiss="modal">취소</button>
                        <a class="btn btn-primary" href="login.html">변경</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 탈퇴Modal-->
        <div class="modal fade" id="withDrawModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"></h5>정말 탈퇴하시겠습니까?</h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" type="button" data-dismiss="modal">아니오</button>
                        <a class="btn btn-primary" href="login.html">네</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 푸터 -->
        <th:block th:replace="common/fragments/index :: footer-fragment"></th:block>
            </div>
            <!-- End of Content Wrapper -->
        </div>

<!-- 스크롤 탑 버튼 -->
<th:block th:replace="common/fragments/index :: scroll-to-top-fragment"></th:block>
<!-- 로그아웃 모달 -->
<th:block th:replace="common/fragments/index :: logout-modal-fragment"></th:block>
<!-- 스크립트 -->
<th:block th:replace="common/fragments/index :: scripts-fragment"></th:block>
    </body>

</html>